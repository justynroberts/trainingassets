- defaultTab: output
  description: "    \n> Rulesets to allow more complex logic processing\n\n**Description:**\n\
    A real world scenario. Run a \"Availability Check\" and parse the output for a\
    \ response\n\n<br>Could easily be extended or modified\n**Assumptions:**\n\n -\
    \ RBA with Runner Installed OR Self Hosted (PAOP)\n - Linux/Windows compatible\n\
    \n**Documentation:** [Rulesets](https://docs.rundeck.com/docs/manual/workflow-strategies/ruleset.html#writing-rules)"
  executionEnabled: true
  group: ðŸ‘£ Your First Steps in Automation ðŸ‘£
  id: 9212fefd-0174-4639-a0cf-ef6e51b8adc5
  loglevel: INFO
  name: 6. Rulesets - Example2
  nodeFilterEditable: false
  options:
  - description: "\nSelect the site to check for availability\n\nwww.pagerduty.com\
      \ will work\nwww.dontwork.com wont \n\n"
    enforced: true
    label: Select Site
    name: site
    required: true
    values:
    - DontWork
    - PagerDuty
    valuesListDelimiter: ','
  plugins:
    ExecutionLifecycle: {}
  runnerSelector:
    filter: WORKSHOP
    runnerFilterMode: TAGS
    runnerFilterType: TAG_FILTER_AND
  scheduleEnabled: false
  schedules: []
  sequence:
    commands:
    - configuration:
        authentication: None
        checkResponseCode: 'false'
        method: GET
        printResponse: 'false'
        printResponseCode: 'true'
        printResponseToFile: 'false'
        proxySettings: 'false'
        remoteUrl: https://www.pagerduty.com
        sslVerify: 'true'
        timeout: '30000'
      description: Test Site 1 (Could be a single step with Parameters)
      nodeStep: false
      plugins:
        LogFilter:
        - config:
            captureMultipleKeysValues: 'true'
            hideOutput: 'false'
            logData: 'true'
            name: output
            regex: (.*)
          type: key-value-data-multilines
      type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
    - configuration:
        authentication: None
        checkResponseCode: 'false'
        method: GET
        printResponse: 'false'
        printResponseCode: 'true'
        printResponseToFile: 'false'
        proxySettings: 'false'
        remoteUrl: https://www.doesnotwork.com
        sslVerify: 'true'
        timeout: '30000'
      description: Test Site 2 (Could be a single step with Parameters)
      nodeStep: false
      plugins:
        LogFilter:
        - config:
            captureMultipleKeysValues: 'true'
            hideOutput: 'false'
            logData: 'true'
            name: output
            regex: (.*)
          type: key-value-data-multilines
      type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
    - description: Run Happy Path
      exec: echo "Run Happy Path..."
    - description: Run Failure Path
      exec: echo "Run Failure Path..."
    keepgoing: false
    pluginConfig:
      LogFilter:
      - config:
          loglevel: verbose
          matchLoglevel: warn
          quietMatch: 'true'
          regex: ^\[wf.*
        type: quiet-output
      WorkflowStrategy:
        ruleset:
          rules: |
            # Autogenerated Directives
            [1,2] run-at-start
            [3,4] run-after:1,2
            # Autogenerated Conditions
            [1] if:option.site==PagerDuty
            [2] if:option.site==Dontwork
            [3] if:data.output==Dontwork
            [4] if:data.output==Dontwork
    strategy: ruleset
  tags: ruleset
  uuid: 9212fefd-0174-4639-a0cf-ef6e51b8adc5

